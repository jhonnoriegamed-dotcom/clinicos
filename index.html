<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ceoclinicos</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="topbar-pills">
        <div class="pills-counter" id="pills-counter" title="Píldoras">
          <img src="images/pil_ama1.png" alt="" class="pills-icon" width="20" height="20">
          <span class="pills-count" id="pills-count">0</span>
        </div>
      </div>
      <div class="topbar-spacer" aria-hidden="true"></div>
      <div class="topbar-left">
        <a href="#inicio" class="nav-link active" data-page="inicio">
          <img src="images/btn_inicio.png" alt="" class="nav-icon-img" width="24" height="24">
          <span class="nav-label">Inicio</span>
        </a>
        <a href="#estudiar" class="nav-link" data-page="estudiar">
          <img src="images/btn_estudiar.png" alt="" class="nav-icon-img" width="24" height="24">
          <span class="nav-label">Estudiar</span>
        </a>
        <a href="#ia" class="nav-link" data-page="ia">
          <img src="images/ia_btn.png" alt="" class="nav-icon-img" width="24" height="24">
          <span class="nav-label">IA</span>
        </a>
      </div>
      <div class="topbar-auth" id="topbar-auth">
        <span class="topbar-user" id="topbar-user" style="display: none;"></span>
        <button type="button" id="btn-open-login" class="btn-auth">Iniciar sesión</button>
        <button type="button" id="btn-open-register" class="btn-auth btn-auth-register">Registrarse</button>
        <button type="button" id="btn-logout" class="btn-auth btn-auth-logout" style="display: none;">Cerrar sesión</button>
      </div>
    </div>
  </header>

  <!-- Modal Login / Registro (como RegistroActivity) -->
  <div id="auth-overlay" class="auth-overlay" aria-hidden="true"></div>
  <div id="auth-panel" class="auth-panel" aria-hidden="true">
    <div class="auth-tabs">
      <button type="button" id="auth-tab-registro" class="auth-tab">Registrarse</button>
      <button type="button" id="auth-tab-login" class="auth-tab active">Iniciar sesión</button>
    </div>
    <p id="auth-warning" class="auth-warning" role="alert"></p>

    <div id="auth-seccion-registro" class="auth-seccion">
      <label>Nombre de usuario <input type="text" id="auth-nombre" autocomplete="username" placeholder="Sin espacios"></label>
      <label>Contraseña <input type="password" id="auth-password" autocomplete="new-password" placeholder="Mín. 4 caracteres"></label>
      <label>Edad <select id="auth-edad"><option value="">Selecciona</option></select></label>
      <label>Sexo
        <span class="auth-radio"><input type="radio" name="auth-sexo" id="auth-sexo-m" value="M"><label for="auth-sexo-m">Masculino</label></span>
        <span class="auth-radio"><input type="radio" name="auth-sexo" id="auth-sexo-f" value="F"><label for="auth-sexo-f">Femenino</label></span>
      </label>
      <label>Profesión <select id="auth-profesion">
        <option value="">Selecciona</option>
        <option value="Médico">Médico</option>
        <option value="Enfermero">Enfermero</option>
        <option value="Estudiante">Estudiante</option>
        <option value="Otro">Otro</option>
      </select></label>
      <label>País <select id="auth-pais">
        <option value="">Selecciona</option>
        <option value="Argentina">Argentina</option>
        <option value="Bolivia">Bolivia</option>
        <option value="Brasil">Brasil</option>
        <option value="Chile">Chile</option>
        <option value="Colombia">Colombia</option>
        <option value="Costa Rica">Costa Rica</option>
        <option value="Cuba">Cuba</option>
        <option value="Ecuador">Ecuador</option>
        <option value="El Salvador">El Salvador</option>
        <option value="España">España</option>
        <option value="Guatemala">Guatemala</option>
        <option value="Honduras">Honduras</option>
        <option value="México">México</option>
        <option value="Nicaragua">Nicaragua</option>
        <option value="Panamá">Panamá</option>
        <option value="Paraguay">Paraguay</option>
        <option value="Perú">Perú</option>
        <option value="Rep. Dominicana">Rep. Dominicana</option>
        <option value="Uruguay">Uruguay</option>
        <option value="Venezuela">Venezuela</option>
        <option value="Otro">Otro</option>
      </select></label>
      <label>Instagram (opcional) <input type="text" id="auth-instagram" placeholder="@usuario"></label>
      <button type="button" id="auth-btn-registrar" class="btn btn-primary">Registrarse</button>
    </div>

    <div id="auth-seccion-login" class="auth-seccion hidden">
      <label>Nombre de usuario <input type="text" id="auth-login-nombre" autocomplete="username"></label>
      <label>Contraseña <input type="password" id="auth-login-password" autocomplete="current-password"></label>
      <button type="button" id="auth-btn-login" class="btn btn-primary">Iniciar sesión</button>
    </div>

    <button type="button" id="auth-btn-cerrar" class="btn btn-ghost">Cerrar</button>
  </div>

  <main class="main">
    <section id="inicio" class="page active">
      <h1 class="title">Ceoclinicos</h1>
      <p class="subtitle">Elige una materia (como en la app). Las guías están en Estudiar.</p>
      <div id="materias-grid" class="materias-grid materias-inicio"></div>
    </section>

    <section id="estudiar" class="page">
      <h2 class="title">Estudiar</h2>
      <p class="subtitle">Guías en PDF. Las que subas aparecerán aquí para descargar.</p>
      <div id="guias-grid" class="guias-grid"></div>
    </section>

    <section id="ia" class="page">
      <h2>IA</h2>
      <p>Herramientas con IA en la aplicación Ceoclinicos.</p>
    </section>

    <!-- Quiz (oculto hasta que se pulse Jugar) -->
    <section id="quiz-view" class="quiz-view" aria-hidden="true">
      <div class="quiz-header">
        <span id="quiz-tema-label" class="quiz-tema"></span>
        <span id="quiz-counter" class="quiz-counter">1 / 10</span>
      </div>
      <div class="quiz-body">
        <p id="quiz-question" class="quiz-question"></p>
        <div id="quiz-options" class="quiz-options"></div>
        <div id="quiz-feedback" class="quiz-feedback" aria-hidden="true">
          <p id="quiz-feedback-msg" class="quiz-feedback-msg"></p>
          <p id="quiz-feedback-explicacion" class="quiz-feedback-explicacion"></p>
          <button type="button" id="quiz-btn-siguiente" class="btn btn-primary">Siguiente</button>
        </div>
      </div>
      <div class="quiz-nav">
        <button type="button" id="quiz-btn-salir" class="btn btn-ghost">Salir</button>
      </div>
    </section>
    <section id="quiz-final" class="quiz-final" aria-hidden="true">
      <h2>Quiz completado</h2>
      <p id="quiz-final-score" class="quiz-final-score"></p>
      <p id="quiz-final-mensaje" class="quiz-final-mensaje"></p>
      <button type="button" id="quiz-final-reintentar" class="btn btn-primary">Reintentar</button>
      <button type="button" id="quiz-final-salir" class="btn btn-secondary">Volver a Estudiar</button>
    </section>
  </main>

  <script src="content-paths.js"></script>
  <script src="pildoras.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
  <script src="firebase-config.js"></script>
  <script src="auth-service.js"></script>
  <script src="temas-data.js"></script>
  <script src="app.js"></script>
</body>
</html>